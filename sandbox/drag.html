<html><head>
<meta name="viewport" content="width=320;height=420;user-scalable=no;initial-scale=1.0">


<!-- Load up the detection libraries. -->
<script type="text/javascript" src="mdetect.js"</script>



<script lang="text/javascript">

function startup() {
  if (DetectIphoneOrIpod()) {
    startupIphone();
  } else {
    startupAndroid();
  }
}




function startupIphone() {
  var elt = document.getElementById("d");
  elt.ontouchmove = function(event) {
    event.preventDefault();
    if (event.touches.length == 1) {
      var touch = event.touches[0];
      elt.style.left = touch.pageX + "px";
      elt.style.top = touch.pageY + "px";
    }
  }

  document.ontouchstart = function(e) {
    // Keep the document from sliding.
    e.preventDefault();
  }
}



function startupAndroid() {
  function move(event) {
     event.preventDefault();
     var elt = document.getElementById("d");
     elt.style.left = event.clientX;
     elt.style.top = event.clientY;
  }

  function stop(event) {
     document.removeEventListener("mousemove", move, true);
     document.removeEventListener("up", stop, true);
  }

  function down(event) {
    event.preventDefault();
    document.addEventListener("mousemove", move, true);
    document.addEventListener("mouseup", stop, true);
  }

  var elt = document.getElementById("d");
  elt.onmousedown = down;
}



</script>

</head>





<body onload="startup()">
<div id="d"
     style="position:absolute;left:100px;top:170px;background-color:rgb(200, 200, 200)">
     I am a div.
</div>
</body>
</html>
